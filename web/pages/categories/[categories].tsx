import { GetServerSideProps, NextPage } from "next";
import Head from "next/head";
import React, { useState } from "react";
import { Footer } from "../../components/Footer/Footer";
import { Header } from "../../components/Header/Header";
import { SearchSoundGifInput } from "../../components/SearchSoundGifInput/SearchSoundGifInput";
import { SoundGifsVerticalList } from "../../components/SoundGifsList/SoundGifsVerticalList/SoundGifsVerticalList";
import { SoundgifDTO } from "../../domain/sound-gif.dto";
import { useApi } from "../../hooks/api/useApi.hook";

type CategoryProps = {
  category: string;
  soundGifs: SoundgifDTO[];
  icon: JSX.Element;
};

const Category: NextPage<CategoryProps> = ({ soundGifs, category, icon }) => {
  const [soundGifsSearchResults, setSoundGifSearchResult] = useState<SoundgifDTO[]>([]);

  const updateSoundGifSearchResults = (soundGifs: SoundgifDTO[]) => {
    setSoundGifSearchResult(soundGifs);
  };

  return (
    <div className="bg-black">
      <Head>
        <title>Vozo</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div>
        <Header />
        <main className="relative overflow-hidden">
          <div className="flex flex-col items-center justify-space container mx-auto">
            <SearchSoundGifInput updateSearchResultCallback={updateSoundGifSearchResults} />
            <SoundGifsVerticalList soundGifs={soundGifs} title={category} icon={icon} />
          </div>
        </main>
      </div>
      <Footer />
    </div>
  );
};
export default Category;
// export async function getStaticPaths() {
//   return ["most_shared", "most_recent"];
// }

// export const getServerSideProps: GetServerSideProps = async ({ locale }: { locale?: string | undefined }) => {
//   const buildingTimeApiUrl = process.env.NEXT_PUBLIC_RUNNING_TIME_API_URL as string;
//   const { findMostRecentSoundGif } = useApi(buildingTimeApiUrl, "");
//   const soundGifs = await findMostRecentSoundGif();
//   return {
//     props: {
//       soundGifs,
//     },
//   };
// };
